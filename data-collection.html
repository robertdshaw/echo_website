<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EchoFrame - Data Collection</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f5f5f5;
      }
  
      .navbar {
        background: #333;
        padding: 15px;
        color: white;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
  
      .navbar-brand {
        font-size: 24px;
        font-weight: bold;
      }
  
      .navbar-menu {
        display: flex;
        gap: 20px;
        align-items: center;
      }
  
      .navbar-menu a {
        color: white;
        text-decoration: none;
        padding: 8px 16px;
      }
  
      .navbar-menu a:hover {
        background: #555;
        border-radius: 4px;
      }
  
      .login-button,
      .logout-button {
        background: #2196f3;
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
      }
  
      .logout-button {
        background: #f44336;
      }
  
      #welcomeUser {
        color: white;
        margin-right: 15px;
      }
  
      /* Dropdown Styles */
      .dropdown {
        position: relative;
        display: inline-block;
      }
  
      .dropbtn {
        background-color: #333;
        color: white;
        padding: 8px 16px;
        font-size: 16px;
        border: none;
        cursor: pointer;
      }
  
      .dropdown-content {
        display: none;
        position: absolute;
        background-color: white;
        min-width: 200px;
        box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.2);
        z-index: 1;
      }
  
      .dropdown-content a {
        color: black;
        padding: 12px 16px;
        text-decoration: none;
        display: block;
      }
  
      .dropdown-content a:hover {
        background-color: #f1f1f1;
      }
  
      .dropdown:hover .dropdown-content {
        display: block;
      }
    </style>
  </head>
  <body>
    <!-- Navigation Bar -->
    <nav class="navbar">
      <div class="navbar-brand">EchoFrame</div>
      <div class="navbar-menu">
        <a href="index.html">Home</a>
        <div class="dropdown">
          <button class="dropbtn">Data Collection â–¼</button>
          <div class="dropdown-content">
            <a href="gmtl-data-collection.html">GMTL Advisory</a>
            <a href="latinnews-data-collection.html">LatinNews</a>
          </div>
        </div>
        <span id="welcomeUser"></span>
        <button class="login-button" onclick="showLoginForm()">Login</button>
        <button class="logout-button" onclick="logout()" style="display: none;">Logout</button>
      </div>
    </nav>
  
    <script>
      function updateUIBasedOnAuth() {
        const token = localStorage.getItem('echoframe_auth_token');
        const expiry = localStorage.getItem('echoframe_auth_token_expiry');
        const username = localStorage.getItem('echoframe_username');
        const isAuthenticated = token && expiry && new Date().getTime() < parseInt(expiry);
  
        document.querySelector('.login-button').style.display = isAuthenticated ? 'none' : 'inline-block';
        document.querySelector('.logout-button').style.display = isAuthenticated ? 'inline-block' : 'none';
  
        const welcomeUser = document.getElementById('welcomeUser');
        if (isAuthenticated && username) {
          welcomeUser.textContent = `Welcome, ${username}`;
        } else {
          welcomeUser.textContent = '';
        }
  
        const loginForm = document.getElementById('loginForm');
        const protectedContent = document.getElementById('protectedContent');
        const accessDenied = document.getElementById('accessDenied');
  
        if (protectedContent && accessDenied) {
          protectedContent.style.display = isAuthenticated ? 'block' : 'none';
          accessDenied.style.display = isAuthenticated ? 'none' : 'block';
        }
  
        if (loginForm) {
          loginForm.style.display = 'none';
        }
      }
  
      window.addEventListener('load', updateUIBasedOnAuth);
      setInterval(updateUIBasedOnAuth, 60000); // Recheck auth every 60s
    </script>
  