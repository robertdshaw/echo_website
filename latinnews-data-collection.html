<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LatinNews Data Request - EchoFrame</title>
    <style>
        /* Base styles */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
            line-height: 1.6;
        }

        /* Navigation styles */
        .navbar {
            background: #333;
            padding: 15px;
            color: white;
        }

        .navbar-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .navbar-brand {
            font-size: 24px;
            font-weight: bold;
            color: white;
            text-decoration: none;
        }

        .navbar-menu {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .navbar-menu a {
            color: white;
            text-decoration: none;
            padding: 8px 16px;
            transition: background-color 0.3s;
        }

        .navbar-menu a:hover {
            background-color: #555;
            border-radius: 4px;
        }

        .navbar-menu a.active {
            background-color: #555;
            border-radius: 4px;
        }

        /* Main content styles */
        .main-content {
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px;
        }

        h1 {
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        /* Info box */
        .info-box {
            background: #f0f7ff;
            border-left: 4px solid #2196F3;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 4px;
        }

        .info-box h3 {
            margin-top: 0;
            color: #1976D2;
        }

        /* Form styles */
        .form-section {
            background: white;
            margin-bottom: 30px;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .form-section h3 {
            color: #333;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #2196F3;
        }

        .section-description {
            color: #666;
            margin-bottom: 20px;
            font-style: italic;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }

        .form-group input[type="text"],
        .form-group input[type="email"],
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            box-sizing: border-box;
        }

        .form-group textarea {
            height: 120px;
            resize: vertical;
        }

        .form-group small {
            display: block;
            margin-top: 5px;
            color: #666;
            font-size: 14px;
        }

        /* Checkbox styles */
        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }

        .checkbox-item input[type="checkbox"] {
            margin-top: 4px;
        }

        .checkbox-item label {
            font-weight: normal;
            margin-bottom: 0;
        }

        /* Dynamic field styles */
        .dynamic-field {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            align-items: flex-start;
        }

        .dynamic-field input,
        .dynamic-field textarea {
            flex: 1;
        }

        /* Button styles */
        .add-button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin-top: 10px;
            transition: background-color 0.3s;
        }

        .add-button:hover {
            background: #45a049;
        }

        .remove-button {
            background: #f44336;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }

        .remove-button:hover {
            background: #da190b;
        }

        .submit-button {
            background: #2196F3;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }

        .submit-button:hover {
            background: #1976D2;
        }

        .submit-button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .navbar-content {
                flex-direction: column;
                align-items: flex-start;
            }

            .navbar-menu {
                margin-top: 15px;
                flex-direction: column;
                width: 100%;
            }

            .navbar-menu a {
                width: 100%;
                text-align: left;
                padding: 10px;
            }

            .checkbox-group {
                grid-template-columns: 1fr;
            }

            .dynamic-field {
                flex-direction: column;
            }

            .remove-button {
                align-self: flex-start;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
 <!-- Navigation for collection pages -->
<nav class="navbar">
    <div class="navbar-content">
        <a href="index.html" class="navbar-brand">EchoFrame</a>
        <div class="navbar-menu">
            <a href="index.html">Home</a>
            <!-- Only show their allowed page -->
            <a href="latinnews-data-collection.html" id="latinnews-link" style="display: none;">LatinNews</a>
            <!-- Logout button will be added dynamically -->
        </div>
    </div>
</nav>

<script>
// Show only allowed navigation links
window.addEventListener('load', function() {
    const allowedPages = JSON.parse(localStorage.getItem('echoframe_allowed_pages') || '[]');
    if (allowedPages.includes('latinnews-data-collection.html')) {
        document.getElementById('latinnews-link').style.display = 'inline-block';
    }
});
</script>

    <!-- Main Content -->
    <div class="main-content">
        <h1>LatinNews Content Access Request</h1>
        
        <div class="info-box">
            <h3>About This Request</h3>
            <p>LatinNews has been providing specialized Latin America intelligence since 1967. We're requesting access to their archive to build ECHOFRAME's historical pattern detection system. This form helps us specify exactly what content we need for our prototype.</p>
        </div>

        <form id="latinNewsForm" onsubmit="handleSubmit(event)">
            <!-- Section 1: Archive Access -->
            <div class="form-section">
                <h3>1. Archive Access Request</h3>
                <p class="section-description">
                    We need access to LatinNews publications to train ECHOFRAME on historical patterns in Latin American political and economic events.
                </p>
                
                <div class="form-group">
                    <label>Which publications do we need for the prototype?</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="pub_weekly" name="publications[]" value="weekly_report">
                            <label for="pub_weekly">Latin American Weekly Report (Priority for pattern detection)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="pub_security" name="publications[]" value="security_review">
                            <label for="pub_security">Security & Strategic Review (For risk pattern analysis)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="pub_economy" name="publications[]" value="economy_business">
                            <label for="pub_economy">Economy & Business (For economic indicators)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="pub_regional" name="publications[]" value="regional_reports">
                            <label for="pub_regional">Regional Reports (Brazil & Southern Cone, Andean Group)</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="time_period">Time Period Needed:</label>
                    <input type="text" id="time_period" name="time_period" placeholder="e.g., Last 3 years (2021-2024) for pattern training">
                    <small>We need sufficient historical data to identify recurring patterns</small>
                </div>
                
                <div class="form-group">
                    <label for="access_method">Preferred Access Method:</label>
                    <select id="access_method" name="access_method">
                        <option value="api">API Access (Best for automation)</option>
                        <option value="database">Database Export</option>
                        <option value="bulk_download">Bulk Download (PDF/HTML)</option>
                        <option value="web_scraping">Web Scraping Permission</option>
                    </select>
                </div>
            </div>

            <!-- Section 2: Content Organization -->
            <div class="form-section">
                <h3>2. Content Organization</h3>
                <p class="section-description">
                    Understanding how LatinNews structures their content will help us parse and categorize it effectively.
                </p>
                
                <div class="form-group">
                    <label>How are articles tagged/categorized?</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="tag_country" name="tagging[]" value="country">
                            <label for="tag_country">By Country</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="tag_topic" name="tagging[]" value="topic">
                            <label for="tag_topic">By Topic (Politics, Economy, Security)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="tag_date" name="tagging[]" value="date">
                            <label for="tag_date">By Date</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="tag_special" name="tagging[]" value="special">
                            <label for="tag_special">Special Tags (Crisis, Elections, etc.)</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="metadata_structure">Article Metadata Available:</label>
                    <textarea id="metadata_structure" name="metadata_structure" placeholder="e.g., Article ID, Author, Publication Date, Country Tags, Topic Tags, Related Articles"></textarea>
                </div>
            </div>

            <!-- Section 3: Specific Content Needs -->
            <div class="form-section">
                <h3>3. Content for Pattern Detection</h3>
                <p class="section-description">
                    We're particularly interested in content that helps identify recurring patterns in Latin American events.
                </p>
                
                <div class="form-group">
                    <label>Priority Content Types for Our Prototype:</label>
                    <div id="priority-content-container">
                        <div class="dynamic-field">
                            <input type="text" name="priority_content[]" placeholder="e.g., Political crisis coverage in Brazil (2015-2023)">
                            <button type="button" class="remove-button" onclick="removeField(this)">Remove</button>
                        </div>
                    </div>
                    <button type="button" class="add-button" onclick="addPriorityContent()">Add Priority Content Type</button>
                </div>
                
                <div class="form-group">
                    <label>Historical Events We Want to Analyze:</label>
                    <div id="historical-events-container">
                        <div class="dynamic-field">
                            <input type="text" name="historical_events[]" placeholder="e.g., Chile protests (2019) - pattern of escalation">
                            <button type="button" class="remove-button" onclick="removeField(this)">Remove</button>
                        </div>
                    </div>
                    <button type="button" class="add-button" onclick="addHistoricalEvent()">Add Historical Event</button>
                </div>
            </div>

            <!-- Section 4: Technical Integration -->
            <div class="form-section">
                <h3>4. Technical Requirements</h3>
                <p class="section-description">
                    Details about how we'll integrate LatinNews content into ECHOFRAME.
                </p>
                
                <div class="form-group">
                    <label for="preferred_format">What format works best for our AI processing?</label>
                    <select id="preferred_format" name="preferred_format">
                        <option value="json">JSON (Structured data)</option>
                        <option value="xml">XML</option>
                        <option value="csv">CSV (For tabular data)</option>
                        <option value="plain_text">Plain Text</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>API Requirements (if available):</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="api_search" name="api_needs[]" value="search">
                            <label for="api_search">Search by date range</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="api_filter" name="api_needs[]" value="filter">
                            <label for="api_filter">Filter by country/topic</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="api_full" name="api_needs[]" value="full_text">
                            <label for="api_full">Access to full article text</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="api_meta" name="api_needs[]" value="metadata">
                            <label for="api_meta">Article metadata</label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 5: Prototype Scope -->
            <div class="form-section">
                <h3>5. Prototype Partnership Proposal</h3>
                <p class="section-description">
                    How we envision using LatinNews content for our initial ECHOFRAME prototype.
                </p>
                
                <div class="form-group">
                    <label for="prototype_timeline">Prototype Timeline:</label>
                    <input type="text" id="prototype_timeline" name="prototype_timeline" placeholder="e.g., 3-6 months initial development">
                </div>
                
                <div class="form-group">
                    <label for="prototype_description">What We'll Build:</label>
                    <textarea id="prototype_description" name="prototype_description" rows="4">1. Pattern detection system for political events
2. Risk signal identification based on historical precedents
3. Timeline visualization of recurring events
4. Early warning system based on LatinNews reporting patterns</textarea>
                </div>
                
                <div class="form-group">
                    <label for="value_proposition">Value to LatinNews:</label>
                    <textarea id="value_proposition" name="value_proposition" rows="4">1. Enhanced analytics capabilities for your content
2. New ways to surface historical patterns in your archive
3. Potential new product offering for your clients
4. Demonstration of your archive's predictive value</textarea>
                </div>
            </div>

            <!-- Section 6: Contact Information -->
            <div class="form-section">
                <h3>6. Contact Information</h3>
                
                <div class="form-group">
                    <label for="latinnews_contact">Primary Contact at LatinNews:</label>
                    <input type="text" id="latinnews_contact" name="latinnews_contact" placeholder="e.g., Client Services Director">
                </div>
                
                <div class="form-group">
                    <label for="our_tech_contact">Our Technical Contact:</label>
                    <input type="text" id="our_tech_contact" name="our_tech_contact" placeholder="Your name and email">
                </div>
                
                <div class="form-group">
                    <label for="next_steps">Preferred Next Steps:</label>
                    <textarea id="next_steps" name="next_steps" rows="3">1. Initial call to discuss prototype scope
2. Technical discussion about API/data access
3. Review sample data structure
4. Agree on pilot terms</textarea>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button type="submit" class="submit-button">Submit LatinNews Request</button>
            </div>
        </form>
    </div>

    <script>
        // Authentication check - Add this to BOTH collection pages
function checkAuth() {
    const token = localStorage.getItem('echoframe_token');
    const username = localStorage.getItem('echoframe_username');
    const allowedPages = JSON.parse(localStorage.getItem('echoframe_allowed_pages') || '[]');
    const currentPage = window.location.pathname.split('/').pop();
    
    if (token !== 'authenticated' || !username || !allowedPages.includes(currentPage)) {
        window.location.href = 'login.html';
        return false;
    }
    return true;
}

function logout() {
    localStorage.removeItem('echoframe_token');
    localStorage.removeItem('echoframe_username');
    localStorage.removeItem('echoframe_allowed_pages');
    window.location.href = 'login.html';
}

// Check authentication on page load
window.addEventListener('load', function() {
    if (!checkAuth()) {
        return;
    }
    
    // Update UI to show username
    const username = localStorage.getItem('echoframe_username');
    const navbarMenu = document.querySelector('.navbar-menu');
    if (navbarMenu) {
        navbarMenu.innerHTML += `
            <span style="color: white; margin-right: 15px;">Welcome, ${username}</span>
            <button onclick="logout()" style="background: #f44336; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">Logout</button>
        `;
    }
});

// Protect form visibility
document.addEventListener('DOMContentLoaded', function() {
    const mainContent = document.querySelector('.main-content');
    if (mainContent) {
        mainContent.style.display = checkAuth() ? 'block' : 'none';
    }
});
        // Dynamic field functions
        function addPriorityContent() {
            const container = document.getElementById('priority-content-container');
            const newField = document.createElement('div');
            newField.className = 'dynamic-field';
            newField.innerHTML = `
                <input type="text" name="priority_content[]" placeholder="Add another priority content type">
                <button type="button" class="remove-button" onclick="removeField(this)">Remove</button>
            `;
            container.appendChild(newField);
        }

        function addHistoricalEvent() {
            const container = document.getElementById('historical-events-container');
            const newField = document.createElement('div');
            newField.className = 'dynamic-field';
            newField.innerHTML = `
                <input type="text" name="historical_events[]" placeholder="Add another historical event to analyze">
                <button type="button" class="remove-button" onclick="removeField(this)">Remove</button>
            `;
            container.appendChild(newField);
        }

        function removeField(button) {
            button.parentElement.remove();
        }

        // Form submission handler
        async function handleSubmit(event) {
            event.preventDefault();
            
            const submitBtn = event.target.querySelector('button[type="submit"]');
            submitBtn.textContent = 'Submitting...';
            submitBtn.disabled = true;
            
            const formData = new FormData(event.target);
            const data = {};
            
            formData.forEach((value, key) => {
                if (!data[key]) {
                    data[key] = value;
                } else {
                    if (!Array.isArray(data[key])) {
                        data[key] = [data[key]];
                    }
                    data[key].push(value);
                }
            });
            
            // Add metadata
            const submissionData = {
                formType: 'LatinNews Request',
                formData: data,
                timestamp: new Date().toISOString()
            };
            
            try {
                // Replace with your Google Apps Script URL
                const response = await fetch('YOUR_GOOGLE_SCRIPT_URL', {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(submissionData)
                });
                
                alert('Request submitted successfully!');
                // Optionally reset form
                // event.target.reset();
                
            } catch (error) {
                console.error('Error:', error);
                alert('There was an error submitting the form. Please try again.');
            } finally {
                submitBtn.textContent = 'Submit LatinNews Request';
                submitBtn.disabled = false;
            }
        }
    </script>
</body>
</html>